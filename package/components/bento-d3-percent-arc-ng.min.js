/**
 * Bento v4.1.6
 * Built on: 2024-11-14T22:21:54
 * Copyright 2024 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(){"use strict";angular.module("bento.d3").directive("bentoD3PercentArc",["bentoD3Config",function(a){return{restrict:"EA",scope:{data:"=",onClick:"&"},link:function(b,c,d){function e(a,b){a.attrTween("d",function(a){var c=d3.interpolate(a.endAngle,b);return function(b){return a.endAngle=c(b),l(a)}})}var f=0,g=800,h=0,i=parseInt(d.size)||80,j=parseInt(d.size)||80,k=2*Math.PI,l=d3.arc().innerRadius(.9*i*.5).outerRadius(.5*i).startAngle(0),m=28*i/100,n=d3.select(c[0]).append("svg").attr("width",i).attr("height",j).append("g").attr("transform","translate("+i/2+","+j/2+")"),o=d.color?a.getBentoColors(d.color):a.bentoColors.orange,p=d.bgColor?a.getBentoColors(d.bgColor):"#ddd";b.$watch("data",function(a){if("object"==typeof a){var c=a.percent||a.value/a.total*100;b.render(c,a.value,a.label)}else b.render(a)},!0),b.render=function(a,b,c){if(void 0!==a){n.selectAll("*").remove(),n.append("path").datum({endAngle:k}).style("fill",p).attr("d",l),n.append("path").datum({endAngle:f}).style("fill",o).attr("d",l).transition().duration(g).call(e,.01*parseInt(a)*k);var d=h,i=h,j=[parseInt(a)];n.selectAll(".number-label").data(j).enter().append("text").text(d).attr("class","number-label").attr("fill",o).attr("y",.3*m).attr("x",0).style("font-size",m+"px").attr("text-anchor","middle").transition().duration(g).tween("text",function(a){var c=d3.interpolate(i,a),d=this;return function(a){i=b?Math.round(b*a):Math.round(c(a))+"%",d.textContent=i}}),c&&(n.selectAll(".number-label").attr("y",.1*m),n.append("text").attr("y",.7*m).attr("x",0).attr("fill",o).style("font-size",.5*m+"px").attr("text-anchor","middle").attr("class","sub-label").text(c)),h=parseInt(a),f=.01*parseInt(a)*k}},b.render()}}}])}();