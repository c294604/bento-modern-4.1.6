/**
 * Bento v4.1.6
 * Built on: 2024-11-14T22:21:54
 * Copyright 2024 Thomson Reuters
 * Maintained by Chi Gao, Joe Huang, Aaron Mendez
 */
!function(a,b,c){"use strict";var d=a.module("bento.d3",["bento.services"]);d.constant("bentoD3Config",{bentoColors:{green:"#85ab44",orange:"#ff8000",red:"#dc0a0a",blue:"#1472c2"},chartColors:["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00"],brandColors:["#ffb400","#ff8000","#A0968C","#666666","#77a22d","#397c2b","#0099c4","#005da2","#444444","#621f95","#6e3ab7","#a00000","#dc0a0a"],colors:["#dc0a0a","#ff8000","#ffb400","#b2b2b8","#606169","#37383d","#78a22f","#397c2b","#096352","#0aa386","#0083bf","#005a84","#a00000","#dc0a0a","#bf086d","#f4317b","#dd40c6","#991a99","#46166b","#6234a4"],brand10:function(){return b.scaleOrdinal().range(this.brandColors)},chart7:function(){return b.scaleOrdinal().range(this.chartColors)},category20:function(){return b.scaleOrdinal().range(this.colors)},getBentoColors:function(a){var b=a;return this.bentoColors[a]&&(b=this.bentoColors[a]),b},addVerticalGradientDef:function(a,b,c,d){var e=a.append("svg:defs").append("svg:linearGradient").attr("id",b).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%").attr("spreadMethod","pad");e.append("svg:stop").attr("offset","0%").attr("stop-color",c).attr("stop-opacity",1),e.append("svg:stop").attr("offset","100%").attr("stop-color",d).attr("stop-opacity",1)},mergeObjects:function(a,b){for(var c in b)try{b[c].constructor===Object?a[c]=this.mergeObjects(a[c],b[c]):a[c]=b[c]}catch(d){a[c]=b[c]}return a}}).directive("bentoD3VerticalSplitBars",["bentoD3Config","$window","$timeout",function(c,d,e){return{restrict:"EA",scope:{data:"="},link:function(f,g,h){var i,j={top:40,right:20,bottom:80,left:50},k=h.width?h.width:g[0].offsetWidth?g[0].offsetWidth:400,l=h.height?h.height:g[0].offsetHeight?g[0].offsetHeight:400,m=k-j.left-j.right,n=l-j.top-j.bottom,o=.5*n,p=h.ticks?h.ticks:3,q=b.select(g[0]).append("svg").attr("width","100%").attr("height",n+j.top+j.bottom).append("g").attr("transform","translate("+j.left+","+j.top+")"),r=c.bentoColors.orange,s=c.bentoColors.green;h.topColor&&(r=f.$parent.$eval(h.topColor)),h.bottomColor&&(s=f.$parent.$eval(h.bottomColor)),f.$watch("data",function(a){f.render(a)},!0),"true"===h.autoWidth&&(d.onresize=function(){f.$apply()},f.$watch(function(){return a.element(d)[0].innerWidth},function(){q.selectAll("*").remove(),i&&clearTimeout(i),i=e(function(){k=g[0].offsetWidth,m=k-j.left-j.right,f.render(f.data)},100)})),f.render=function(a){var d=b.scaleOrdinal().rangeRoundBands([0,m],.35),e=b.svg.axis().scale(d).orient("bottom"),f=b.scale.linear().range([o,0]),g=b.svg.axis().scale(f).orient("left").ticks(p,""),i=b.scale.linear().range([o,n]),j=b.svg.axis().scale(i).orient("left").ticks(p,"");r instanceof Array&&2===r.length&&c.addVerticalGradientDef(q,"topColor",r[0],r[1]),s instanceof Array&&2===s.length&&c.addVerticalGradientDef(q,"bottomColor",s[0],s[1]),d.domain(a.map(function(a){return a[h.category]}));var k=b.max(a,function(a){return a[h.topBars]}),l=b.max(a,function(a){return a[h.bottomBars]}),t=k>l?k:l;f.domain([0,t]),i.domain([0,t]),q.append("g").attr("class","x axis").attr("transform","translate(0,0)").attr("fill","none").attr("stroke","none").attr("shape-rendering","crispEdges").call(e),q.append("g").attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").attr("class","y axis").call(g),q.append("g").attr("fill","none").attr("stroke","#000").attr("shape-rendering","crispEdges").attr("class","y axis").call(j),q.selectAll(".bar").data(a).enter().append("rect").attr("class","bar").attr("x",function(a){return d(a[h.category])}).attr("width",d.rangeBand()).attr("fill",function(){return r instanceof Array?"url(#topColor)":r}).attr("height",0).attr("y",o).transition().duration(1e3).attr("y",function(a){return f(a[h.topBars])}).attr("height",function(a){return o-f(a[h.topBars])}),q.selectAll(".bar-bottom").data(a).enter().append("rect").attr("class","bar-bottom").attr("x",function(a){return d(a[h.category])}).attr("width",d.rangeBand()).attr("fill",function(){return s instanceof Array?"url(#bottomColor)":s}).attr("height",0).attr("y",o).transition().duration(1e3).attr("height",function(a){return i(a[h.bottomBars])-o}),q.selectAll("line.horizontal-grid").data(f.ticks(p)).enter().append("line").attr({"class":"horizontal-grid",x1:0,x2:m,y1:function(a){return f(a)},y2:function(a){return f(a)}}).style({stroke:"#000","stroke-opacity":"0.1"}),q.selectAll("line.bottom-horizontal-grid").data(i.ticks(p)).enter().append("line").attr({"class":"bottom-horizontal-grid horizontal-grid",x1:0,x2:m,y1:function(a){return i(a)},y2:function(a){return i(a)}}).style({stroke:"#000","stroke-opacity":"0.1"}),q.append("line").attr({"class":"middle-x-axis",x1:0,y1:o,x2:m,y2:o,stroke:"#eee","stroke-width":"3"}),q.selectAll(".x.axis text").attr("transform",function(){return"translate("+this.getBBox().height*-1+","+this.getBBox().height+")rotate(-45 0,0)"}).style("text-anchor","end").attr("x",-(1.35*o)).attr("y",1.35*o)}}}}]).directive("bentoD3ProgressMeter",["bentoD3Config",function(a){return{restrict:"EA",scope:{data:"="},link:function(d,e,f){function g(){if(h!==c){o.selectAll("*").remove();var a=0,d=0,e=[parseInt(h)],f=0;o.selectAll("text").data(e).enter().append("text").text(a).attr("fill",r).attr("y",j-2).attr("x",function(){var a=i+3;return"left"===n&&(a=0),a}).style("font-size",l+"px").attr("text-anchor",n).transition().duration(1500).tween("text",function(a){var c=b.interpolate(d,a);return function(a){d=Math.round(c(a)),this.textContent=d+"%"}});var g=0;if("left"===n){var k=o.select("text")[0][0];k.textContent="100%",f=k.getBBox().width,g=f}o.append("rect").attr("height",j).attr("width",i).attr("rx",m).attr("ry",m).attr("x",g).attr("y",0).attr("fill",q),o.append("rect").attr("height",j).attr("width",0).attr("x",g).attr("y",0).attr("rx",m).attr("ry",m).attr("fill",p).transition().duration(1500).attr("width",function(){return.01*h*i})}}var h,i=parseInt(f.width)||200,j=parseInt(f.height)||10,k=3*j,l=j,m=f.radius?parseInt(f.radius):0,n=f.alignment?f.alignment:"right",o=b.select(e[0]).append("svg").attr("width",i+k).attr("height",j),p=f.color?a.getBentoColors(f.color):a.bentoColors.orange,q=f.bgColor?a.getBentoColors(f.bgColor):"#ccc",r=f.bgColor?a.getBentoColors(f.bgColor):"#000";d.$watch("data",function(a){h=a,g()},!0),f.$observe("alignment",function(a){a&&(n=a,g())}),f.$observe("color",function(b){b&&(p=a.getBentoColors(b),g())})}}}]).directive("bentoD3HorizontalBars",["bentoD3Config","$window","$timeout",function(c,d,e){return{restrict:"EA",scope:{data:"="},link:function(f,g,h){var i,j=parseInt(h.margin)||20,k=parseInt(h.barHeight)||30,l=parseInt(h.barPadding)||5,m=b.select(g[0]).append("svg").style("width","100%");d.onresize=function(){f.$apply()},f.$watch(function(){return a.element(d)[0].innerWidth},function(){f.render(f.data)}),f.$watch("data",function(a){f.render(a)},!0),f.render=function(a){m.selectAll("*").remove(),a&&(i&&clearTimeout(i),i=e(function(){var d=b.select(g[0]).node().offsetWidth-j,e=f.data.length*(k+l),h=c.category20(),i=b.scale.linear().domain([0,b.max(a,function(a){return a.value})]).range([0,d]);m.attr("height",e),m.selectAll("rect").data(a).enter().append("rect").on("click",function(a){return f.onClick({item:a})}).attr("height",k).attr("width",140).attr("x",Math.round(j/2)).attr("y",function(a,b){return b*(k+l)}).attr("fill",function(a){return h(a.value)}).on("click",function(a){return f.onClick({item:a})}).transition().duration(1e3).attr("width",function(a){return i(a.value)}),m.selectAll("text").data(a).enter().append("text").attr("fill","#fff").attr("y",function(a,b){return b*(k+l)+15}).attr("x",15).text(function(a){return a.name+" ("+a.value+")"})},100))}}}}]).directive("bentoD3LineChart",["bentoD3Config",function(a){return{restrict:"EA",scope:{data:"=",onClick:"&"},link:function(c,d,e){var f=parseInt(e.size)||150,g=parseInt(e.size)||150,h=a.category20(),i=b.svg.arc().innerRadius(30).outerRadius(60),j=b.layout.pie().sort(null),k=b.select(d[0]).append("svg").attr("width",f).attr("height",g).append("g").attr("transform","translate("+f/2+","+g/2+")");c.$watch("data",function(a){c.render(a)},!0),c.render=function(a){k.selectAll("*").remove(),k.selectAll("path").data(j(a)).enter().append("path").attr("fill",function(a,b){return h(b)}).attr("d",i)}}}}])}(window.angular,d3),function(){"use strict";function a(a,b,c,d){function e(){return"d3-tooltip-"+Math.round(1e6*Math.random())}function f(a){return'<div id="'+a+'" class="bento-d3-tooltip top tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}function g(a,b){var c=[];return a.series.forEach(function(d,e){c[e]={},c[e].name=d.name;var f=0,g=0;c[e].barData=d.data.map(function(c,e){var h={};return h.groupName=d.name,"object"==typeof c?(h.name=c.name,h.color=c.color,"y"===b?(h.value=+c.x,h.x0=f,h.x1=f+=+c.x):"x"===b&&(h.value=+c.y,h.y0=g,h.y1=g+=+c.y)):a.yAxis&&a.yAxis.categories?(h.name=a.yAxis.categories[e],h.value=+c,h.x0=f,h.x1=f+=+c):a.xAxis&&a.xAxis.categories&&(h.name=a.xAxis.categories[e],h.value=+c,h.y0=g,h.y1=g+=+c),h}),"y"===b?c[e].total=c[e].barData[c[e].barData.length-1].x1:"x"===b&&(c[e].total=c[e].barData[c[e].barData.length-1].y1)}),c}function h(a){var b,c={};for(var d in a)if(a.hasOwnProperty(d))if("object"==typeof a[d]){b=h(a[d]);for(var e in b)b.hasOwnProperty(e)&&(c[d+(isNaN(e)?"."+e:"")]=b[e])}else c[d]=a[d];return c}function i(a,b,c,d,e){var f=d3.mouse(c),g=f[0]-b.clientLeft,h=f[1]-b.clientTop,i=d3.select("#"+d);i.select(".tooltip-inner").text(e?e(a):a.name+": "+a.value),i.attr("class","bento-d3-tooltip top tooltip in").style("left",g-i.node().getBoundingClientRect().width/2+"px").style("top",h-i.node().getBoundingClientRect().height-5+"px").style("display","block")}function j(a){d3.select("#"+a).style("display","none")}function k(a,b,c,e,f,g,h,i,j,k){b.attr("transform","translate("+(a[0].getBoundingClientRect().width-e.chart.marginLeft)+","+e.chart.marginTop+") scale(-1,1)");var l=b.selectAll(".x.axis text"),m="ie"===d.getBrowser().browser,n=m?"start":"end",o=m?.2:.3,p=m?.75:1;c["xAxis.labels.rotation"]?l.attr("transform",function(){return"translate("+this.getBBox().height*-o+","+this.getBBox().height*o+")rotate("+c["xAxis.labels.rotation"]+" 0,0) scale(-1,1)"}).style("text-anchor",n).attr("x",0).attr("y",0):l.attr("transform","scale(-1,1)"),f&&f.attr("transform","scale(-1,1)").attr("x",-e.chart.width/2).style("text-anchor","middle").attr("dy",j*p),g&&g.attr("transform","rotate(-90) scale(-1,1)").attr("x",e.chart.height/2).attr("dy",k*p),h&&h.attr("transform","scale(-1,1)").attr("text-anchor",n).attr("x","9"),i&&i.select("text").attr("x",-(e.chart.width-21+e.chart.marginRight)).attr("transform","scale(-1,1)").style("text-anchor",n)}var l={chart:{marginTop:20,marginRight:20,marginBottom:40,marginLeft:50,width:300,height:300},plotOptions:{series:{groupPadding:.24,pointPadding:.2}}};return{defaultOptions:l,tooltipID:e,tooltipHTML:f,getD3Data:g,flattenObject:h,onMouseMove:i,onMouseOut:j,makeRTL:k}}angular.module("bento.d3").factory("bentoChartService",a),a.$inject=["bentoD3Config","$window","$timeout","$bentoServices"]}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g,h){function i(){if(f.data){var a=f.data.yAxis&&f.data.yAxis.categories||f.data.series[0].data.map(function(a){return a.name}),b=e.getD3Data(f.data,"y");d3.select(g[0]).select("svg").remove(),o=d3.select(g[0]).append("svg").attr("width","100%").attr("height",s.chart.height+s.chart.marginTop+s.chart.marginBottom).append("g");var c=d3.scaleLinear(),h=d3.max(f.data.series,function(a){return"object"==typeof a.data[0]?d3.max(a.data,function(a){return a.x}):d3.max(a.data)}),i=d3.min(f.data.series,function(a){return"object"==typeof a.data[0]?d3.min(a.data,function(a){return a.x}):d3.min(a.data)});i=i>0?0:i+.1*i,h=h<0?0:h+.1*h;var k=e.flattenObject(s);k.colors&&(t=d3.scaleOrdinal().range(s.colors)),k["plotOptions.series.stacking"]||k["plotOptions.bar.stacking"]?(i=0,h=d3.max(b,function(a){return a.total}),c.domain([h,i]).nice().range([s.chart.width,0])):c.domain([h,i]).nice().range([s.chart.width,0]);var l=d3.axisBottom(c);k["xAxis.labels.formatter"]&&l.tickFormat(k["xAxis.labels.formatter"]);var m=o.append("g").attr("shape-rendering","crispEdges").attr("transform","translate(0,"+s.chart.height+")").attr("class","x axis").call(l),n=0,p=m.selectAll("text");if(k["xAxis.labels.style.fontSize"]&&p.attr("font-size",k["xAxis.labels.style.fontSize"]),k["xAxis.labels.rotation"]&&o.selectAll(".x.axis text").attr("transform",function(){return"translate("+this.getBBox().height*-.5+","+.5*this.getBBox().height+")rotate("+k["xAxis.labels.rotation"]+" 0,0)"}).style("text-anchor","end").attr("x",0).attr("y",0),p.each(function(){this.getBBox().height>n&&(n=this.getBoundingClientRect().height)}),k["xAxis.title.text"]){var q=m.append("text").attr("x",s.chart.width/2).style("text-anchor","middle").text(k["xAxis.title.text"]);n=n+q.node().getBoundingClientRect().height+10,q.attr("dy",n)}o.attr("transform","translate("+s.chart.marginLeft+","+s.chart.marginTop+")");var r=b.length>1?k["plotOptions.series.groupPadding"]:0,v=k["plotOptions.series.pointPadding"],w=d3.scaleBand().range([0,s.chart.height]).padding(r).round(!0),x=d3.scaleBand(),y=d3.axisLeft(w);k["yAxis.labels.formatter"]&&y.tickFormat(k["yAxis.labels.formatter"]),b.length>1?y.scale(w):y.scale(x),w.domain(b.map(function(a){return a.name})),x.domain(a).range([0,w.bandwidth()]).padding(v).round(!0),o.selectAll("line.vertical-grid").data(c.ticks()).enter().append("line").attr("class","vertical-grid").attr("y1",0).attr("y2",s.chart.height).attr("x1",function(a){return c(a)}).attr("x2",function(a){return c(a)}).style("stroke","#000").style("stroke-opacity","0.1");var z=o.selectAll(".col").data(b).enter().append("g").attr("class",".col").attr("transform",function(a){return"translate(0,"+w(a.name)+")"}),A=k["tooltip.formatter"],B=z.selectAll(".bar").data(function(a){return a.barData}).enter().append("rect").on("mouseover",function(a){e.onMouseMove(a,this,g[0],u,A)}).on("mousemove",function(a){e.onMouseMove(a,this,g[0],u,A)}).on("mouseout",function(){e.onMouseOut(u)}).attr("class","bar");k["plotOptions.series.stacking"]||k["plotOptions.bar.stacking"]?(y.scale(w),B.attr("height",w.bandwidth()).attr("fill",j).attr("width",0).attr("x",function(a){return c(0)}).transition().duration(1e3).attr("width",function(a){return c(a.x1)-c(a.x0)}).attr("x",function(a){return c(a.x0)})):B.attr("y",function(a){return x(a.name)}).attr("height",x.bandwidth()).attr("fill",j).attr("width",0).attr("x",function(a){return c(0)}).transition().duration(1e3).attr("x",function(a){return c(a.value>0?0:a.value)}).attr("width",function(a){return Math.abs(c(a.value)-c(0))});var C=o.append("g").attr("class","y axis").attr("shape-rendering","crispEdges").call(y);k["yAxis.labels.style.fontSize"]&&o.selectAll(".y.axis text").attr("font-size",k["yAxis.labels.style.fontSize"]);var D=0,E=C.selectAll("text");if(k["yAxis.labels.style.fontSize"]&&E.attr("font-size",k["yAxis.labels.style.fontSize"]),E.each(function(){this.getBBox().width>D&&(D=this.getBBox().width)}),k["yAxis.title.text"]){var F=C.append("text").attr("transform","rotate(-90)").attr("x",-s.chart.height/2).style("text-anchor","middle").text(k["yAxis.title.text"]);D=-D-F.node().getBBox().height-2,F.attr("dy",D)}if(0!=i&&o.append("g").append("line").attr("class","y axis").attr("x1",c(0)).attr("x2",c(0)).attr("y2",s.chart.height),0!=k["legend.enabled"]&&(b.length>1||k["plotOptions.series.stacking"]||k["plotOptions.bar.stacking"])){var G;G=o.selectAll(".legend").data(a.slice()).enter().append("g").attr("class","legend").attr("transform",function(a,b){return"translate(0,"+19*b+")"}),G.append("rect").attr("x",s.chart.width-15+s.chart.marginRight).attr("width",15).attr("height",15).style("fill",t),G.append("text").attr("x",s.chart.width-21+s.chart.marginRight).attr("y",9).attr("dy",".15em").style("text-anchor","end").text(function(a){return a})}d.isRTL()===!0&&e.makeRTL(g,o,k,s,q,F,E,G,n,D)}}function j(a){return a.color?a.color:t(a.name)}function k(a,b){a&&a.series&&m()}function l(){f.$apply()}function m(a){p&&c.cancel(p),p=c(function(){s.chart.width=g[0].offsetWidth-s.chart.marginLeft-s.chart.marginRight,s.chart.width<0&&(s.chart.width=0),i()},500)}function n(){angular.element(b).off("resize",l),d3.select(g[0]).select("svg").remove()}var o,p,q=angular.copy(e.defaultOptions),r=angular.copy(f.data),s=angular.merge(q,r),t=a.brand10();f.$watch("data",k,!0),f.$on("$destroy",n),g.on("$destroy",n),angular.element(b).on("resize",l),f.$watch(function(){return g[0].offsetWidth},m);var u=e.tooltipID(),v=e.tooltipHTML(u);g.append(v)}return{restrict:"EA",scope:{data:"="},link:f}}angular.module("bento.d3").directive("bentoD3BarChart",a),a.$inject=["bentoD3Config","$window","$timeout","$bentoServices","bentoChartService"]}(),function(){"use strict";angular.module("bento.d3").directive("bentoD3PieChart",["bentoD3Config","$bentoServices",function(a,b){return{restrict:"EA",scope:{data:"=",index:"=",responsive:"@",onClick:"&",onHover:"&",onLeave:"&"},link:function(c,d,e){function f(a){if(void 0!==a){var b;s.selectAll(".arc").each(function(c,d){d===a?(b=c,d3.select(this).classed("is-faded",!1).classed("is-selected",!0)):a===-1?g():d3.select(this).classed("is-faded",!0).classed("is-selected",!1)}),c.onHover({item:b,index:a}),c.onClick({item:b,index:a})}}function g(){s.selectAll(".arc").classed("is-faded",!1).classed("is-selected",!1),c.onClick({item:{},index:-1})}function h(){var a=s.selectAll(".arc");e.onClick&&a.on("click",null),e.onHover&&a.on("mouseover",null),e.onLeave&&s.on("mouseleave",null)}var i=e.diameter?parseInt(e.diameter):120,j=e.padding?parseInt(e.padding):0,k=i+j,l=i+j,m=i/2,n=a.brand10(),o=e.innerRadius?e.innerRadius:0,p=m+20;e.responsive&&(d[0].className+=" is-responsive");var q=d3.arc().outerRadius(m).innerRadius(o),r=d3.pie().sort(null),s=d3.select(d[0]).append("svg").attr("width",k).attr("height",l).attr("preserveAspectRatio","xMidYMid").attr("viewBox","0 0 "+l+" "+k).append("g").attr("transform","translate("+k/2+","+l/2+")");c.$watchCollection("data",function(a){c.render(a)}),c.$on("$destroy",h),d.on("$destroy",h),c.$watch("index",function(a){f(a)}),c.render=function(a){var d=d3.sum(a,function(a){return a.value});s.selectAll("*").remove();var h=[];a.forEach(function(a){h.push(a.value)});var i=s.selectAll(".arc").data(r(h)).enter().append("g").attr("class","arc");e.onClick&&i.on("click",function(a,b){var d=this,e=b;c.$apply(function(){d3.select(d).classed("is-selected")?g():f(e)})}),e.onHover&&i.on("mouseover",function(a,b){var d=b;c.$apply(function(){f(d)})}),e.onLeave&&s.on("mouseleave",function(){c.$apply(function(){s.selectAll(".arc").classed("is-faded",!1).classed("is-selected",!1),c.onLeave()})}),i.append("path").style("fill",function(b,c){var e=a[c].color||n(c);return a[c].color=e,a[c].percent=Math.round(b.value/d*100,1),e}).attr("d",q),e.labelOutside?i.append("text").attr("transform",function(a){var b=q.centroid(a),c=b[0],d=b[1],e=Math.sqrt(c*c+d*d);return"translate("+c/e*p+","+d/e*p+")"}).attr("class",function(a){var c="end",d="start";return b.isRTL()===!0&&"ie"===b.getBrowser().browser&&(c="start",d="end"),(a.endAngle+a.startAngle)/2>Math.PI?"label-outside "+c:"label-outside "+d}).text(function(b,c){return a[c].label}):i.append("text").attr("transform",function(a){return"translate("+q.centroid(a)+")"}).style("text-anchor","middle").text(function(b,c){return a[c].label})}}}}])}(),function(){"use strict";angular.module("bento.d3").directive("bentoD3PercentArc",["bentoD3Config",function(a){return{restrict:"EA",scope:{data:"=",onClick:"&"},link:function(b,c,d){function e(a,b){a.attrTween("d",function(a){var c=d3.interpolate(a.endAngle,b);return function(b){return a.endAngle=c(b),l(a)}})}var f=0,g=800,h=0,i=parseInt(d.size)||80,j=parseInt(d.size)||80,k=2*Math.PI,l=d3.arc().innerRadius(.9*i*.5).outerRadius(.5*i).startAngle(0),m=28*i/100,n=d3.select(c[0]).append("svg").attr("width",i).attr("height",j).append("g").attr("transform","translate("+i/2+","+j/2+")"),o=d.color?a.getBentoColors(d.color):a.bentoColors.orange,p=d.bgColor?a.getBentoColors(d.bgColor):"#ddd";b.$watch("data",function(a){if("object"==typeof a){var c=a.percent||a.value/a.total*100;b.render(c,a.value,a.label)}else b.render(a)},!0),b.render=function(a,b,c){if(void 0!==a){n.selectAll("*").remove(),n.append("path").datum({endAngle:k}).style("fill",p).attr("d",l),n.append("path").datum({endAngle:f}).style("fill",o).attr("d",l).transition().duration(g).call(e,.01*parseInt(a)*k);var d=h,i=h,j=[parseInt(a)];n.selectAll(".number-label").data(j).enter().append("text").text(d).attr("class","number-label").attr("fill",o).attr("y",.3*m).attr("x",0).style("font-size",m+"px").attr("text-anchor","middle").transition().duration(g).tween("text",function(a){var c=d3.interpolate(i,a),d=this;return function(a){i=b?Math.round(b*a):Math.round(c(a))+"%",d.textContent=i}}),c&&(n.selectAll(".number-label").attr("y",.1*m),n.append("text").attr("y",.7*m).attr("x",0).attr("fill",o).style("font-size",.5*m+"px").attr("text-anchor","middle").attr("class","sub-label").text(c)),h=parseInt(a),f=.01*parseInt(a)*k}},b.render()}}}])}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g,h){function i(){if(f.data){var a=f.data.xAxis&&f.data.xAxis.categories||f.data.series[0].data.map(function(a){return a.name}),b=e.getD3Data(f.data,"x");d3.select(g[0]).select("svg").remove(),o=d3.select(g[0]).append("svg").attr("width","100%").attr("height",s.chart.height+s.chart.marginTop+s.chart.marginBottom).append("g");var c=d3.scaleLinear(),h=d3.max(f.data.series,function(a){return"object"==typeof a.data[0]?d3.max(a.data,function(a){return a.y}):d3.max(a.data)}),i=d3.min(f.data.series,function(a){return"object"==typeof a.data[0]?d3.min(a.data,function(a){return a.y}):d3.min(a.data)});i=i>0?0:i+.1*i,h=h<0?0:h+.1*h;var k=e.flattenObject(s);k.colors&&(t=d3.scaleOrdinal().range(s.colors));var l=d3.axisBottom();k["plotOptions.series.stacking"]||k["plotOptions.column.stacking"]?(l.scale(x),i=0,h=d3.max(b,function(a){return a.total}),c.domain([i,h]).nice().range([s.chart.height,0])):c.domain([i,h]).nice().range([s.chart.height,0]);var m=d3.axisLeft(c);k["yAxis.labels.formatter"]&&m.tickFormat(k["yAxis.labels.formatter"]),k["yAxis.ticks.count"]&&m.ticks(k["yAxis.ticks.count"]);var n=o.append("g").attr("shape-rendering","crispEdges").attr("class","y axis").call(m),p=0,q=n.selectAll("text");if(k["yAxis.labels.style.fontSize"]&&q.attr("font-size",k["yAxis.labels.style.fontSize"]),q.each(function(){this.getBBox().width>p&&(p=this.getBBox().width)}),k["yAxis.title.text"]){var r=n.append("text").attr("transform","rotate(-90)").attr("x",-s.chart.height/2).style("text-anchor","middle").text(k["yAxis.title.text"]);p=-p-r.node().getBBox().height-2,r.attr("dy",p)}o.attr("transform","translate("+s.chart.marginLeft+","+s.chart.marginTop+")");var v=b.length>1?k["plotOptions.series.groupPadding"]:0,w=k["plotOptions.series.pointPadding"],x=d3.scaleBand().range([0,s.chart.width]).padding(v).round(!0),y=d3.scaleBand();k["xAxis.labels.formatter"]&&l.tickFormat(k["xAxis.labels.formatter"]),b.length>1?l.scale(x):l.scale(y),x.domain(b.map(function(a){return a.name})),y.domain(a).range([0,x.bandwidth()]).padding(w).round(!0),o.selectAll("line.horizontal-grid").data(c.ticks()).enter().append("line").attr("class","horizontal-grid").attr("x1",0).attr("x2",s.chart.width).attr("y1",function(a){return c(a)}).attr("y2",function(a){return c(a)}).style("stroke","#000").style("stroke-opacity","0.1");var z=o.selectAll(".col").data(b).enter().append("g").attr("class",".col").attr("transform",function(a){return"translate("+x(a.name)+",0)"}),A=k["tooltip.formatter"],B=z.selectAll(".bar").data(function(a){return a.barData}).enter().append("rect").on("mouseover",function(a){e.onMouseMove(a,this,g[0],u,A)}).on("mousemove",function(a){e.onMouseMove(a,this,g[0],u,A)}).on("mouseout",function(){e.onMouseOut(u)}).attr("class","bar");k["plotOptions.series.stacking"]||k["plotOptions.column.stacking"]?B.attr("width",x.bandwidth()).attr("fill",j).attr("height",0).attr("y",function(a){return c(0)}).transition().duration(1e3).attr("height",function(a){return c(a.y0)-c(a.y1)}).attr("y",function(a){return c(a.y1)}):B.attr("x",function(a){return y(a.name)}).attr("width",y.bandwidth()).attr("fill",j).attr("height",0).attr("y",function(a){return c(0)}).transition().duration(1e3).attr("y",function(a){return c(a.value<0?0:a.value)}).attr("height",function(a){return Math.abs(c(a.value)-c(0))}),0!=i&&o.append("g").append("line").attr("class","x axis").attr("y1",c(0)).attr("y2",c(0)).attr("x2",s.chart.width);var C=o.append("g").attr("class","x axis").attr("transform","translate(0,"+s.chart.height+")").attr("shape-rendering","crispEdges").call(l);k["xAxis.labels.rotation"]&&o.selectAll(".x.axis text").attr("transform",function(){return"translate("+this.getBBox().height*-.5+","+.5*this.getBBox().height+")rotate("+k["xAxis.labels.rotation"]+" 0,0)"}).style("text-anchor","end").attr("x",0).attr("y",0),k["xAxis.labels.style.fontSize"]&&o.selectAll(".x.axis text").attr("font-size",k["xAxis.labels.style.fontSize"]);var D=0,E=C.selectAll("text");if(k["xAxis.labels.style.fontSize"]&&E.attr("font-size",k["xAxis.labels.style.fontSize"]),E.each(function(){this.getBoundingClientRect().height>D&&(D=this.getBoundingClientRect().height)}),k["xAxis.title.text"]){var F=C.append("text").attr("x",s.chart.width/2).style("text-anchor","middle").text(k["xAxis.title.text"]);D=D+F.node().getBoundingClientRect().height+10,F.attr("dy",D)}if(0!=k["legend.enabled"]&&b.length>1){var G;G=k["plotOptions.series.stacking"]||k["plotOptions.column.stacking"]?o.selectAll(".legend").data(a.slice().reverse()).enter().append("g"):o.selectAll(".legend").data(a.slice()).enter().append("g"),G.attr("class","legend").attr("transform",function(a,b){return"translate(0,"+19*b+")"}),G.append("rect").attr("x",s.chart.width-15+s.chart.marginRight).attr("width",15).attr("height",15).style("fill",t),G.append("text").attr("x",s.chart.width-21+s.chart.marginRight).attr("y",9).attr("dy",".15em").style("text-anchor","end").text(function(a){return a})}d.isRTL()===!0&&e.makeRTL(g,o,k,s,F,r,q,G,D,p)}}function j(a){return a.color?a.color:t(a.name)}function k(a,b){a&&a.series&&m()}function l(){f.$apply()}function m(a){p&&c.cancel(p),p=c(function(){s.chart.width=g[0].offsetWidth-s.chart.marginLeft-s.chart.marginRight,s.chart.width<0&&(s.chart.width=0),i()},500)}function n(){angular.element(b).off("resize",l),d3.select(g[0]).select("svg").remove()}var o,p,q=angular.copy(e.defaultOptions),r=angular.copy(f.data),s=angular.merge(q,r),t=a.brand10();f.$watch("data",k,!0),f.$on("$destroy",n),g.on("$destroy",n),angular.element(b).on("resize",l),f.$watch(function(){return g[0].offsetWidth},m);var u=e.tooltipID(),v=e.tooltipHTML(u);g.append(v)}return{restrict:"EA",scope:{data:"="},link:f}}angular.module("bento.d3").directive("bentoD3ColumnChart",a),a.$inject=["bentoD3Config","$window","$timeout","$bentoServices","bentoChartService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(b,c,d,g){function h(a){a&&a.series&&a.series[0].data&&(D=!0,o())}function i(a){return a.color?a.color:v(a.name)}function j(){d3.select(c[0]).select("svg").remove(),x=d3.select(c[0]).append("svg").attr("width",t.chart.width).attr("height",t.chart.height).attr("class","bento-d3-bubbles"),C=d3.scalePoint().domain(d3.range(A)).range([0,t.chart.width],1),w=angular.copy(b.data.series[0].data),u.nodes=w;var a=d3.min(w,function(a){return parseInt(a.value)}),d=d3.max(w,function(a){return parseInt(a.value)});z=d3.scaleLinear().domain([a,d]).range([t.chart.radius.min,t.chart.radius.max]),w.forEach(function(a,b){var c=Math.floor(Math.random()*A);(c+1)/A*-Math.log(Math.random());a.cx=C(c),a.cy=t.chart.height/2,a[0]=0,a[1]=0,a.count=a.value,a.value=z(a.value),a.name=a.name,a.id=Math.random().toString(36).substr(2,9)}),r=d3.forceSimulation().nodes(w).force("x",d3.forceX().strength(0)).force("y",d3.forceY().strength(0)).force("center",d3.forceCenter(t.chart.width/2,t.chart.height/2)).on("tick",k),y=x.selectAll("g").data(w).enter().append("g").attr("id",function(a){return"node"+a.id}).attr("class","node").attr("cx",function(a){return a.cx}).attr("cy",function(a){return a.cy}).attr("transform",function(a){return"translate("+a[0]+","+a[1]+")"});y.append("circle").attr("class",function(a){return"bubble "+(a.type?a.type:"")}).attr("fill",i).attr("r",function(a){return a.value}),y.append("text").selectAll("tspan").data(function(a){return a.name.split(" ")}).enter().append("tspan").attr("x",0).attr("y",function(a,b,c){return 18+15*(b-c.length/2-.5)}).attr("fill","#ffffff").attr("text-anchor","middle").text(function(a){return a})}function k(a){y.each(l(.5*r.alpha())).each(m(.5)).attr("cx",function(a){return a[0]}).attr("cy",function(a){return a.y}).attr("transform",function(a){return"translate("+a[0]+","+a[1]+")"})}function l(a){return function(b){var c=b.value+4;b[1]+=(b.cy-b.y)*a,b[0]+=(b.cx-b[0])*a/8,b[0]-c<0?b[0]=c:b[0]+c>t.chart.width&&(b[0]=t.chart.width-c),b[1]-c<0?b[1]=c:b[1]+c>t.chart.height&&(b[1]=t.chart.height-c)}}function m(a){var b=d3.quadtree(w);return function(c){var d=c.value+z.domain()[1]+B,e=c[0]-d,f=c[0]+d,g=c[1]-d,h=c[1]+d;b.visit(function(b,d,i,j,k){if(b.data&&b.data!==c){var l=c[0]-b.data[0],m=c[1]-b.data[1],n=Math.sqrt(l*l+m*m),o=c.value+b.data.value;n<o&&(n=(n-o)/n*a,c[0]-=l*=n,c[1]-=m*=n,b.data[0]+=l,b.data[1]+=m)}return d>f||j<e||i>h||k<g})}}function n(){b.$apply()}function o(a){D&&(q&&f.cancel(q),q=f(function(){t.chart.width=c[0].offsetWidth-t.chart.marginLeft-t.chart.marginRight,t.chart.width<0&&(t.chart.width=0),j()},500))}function p(){angular.element(e).off("resize",n),d3.select(c[0]).select("svg").remove()}var q,r,s={chart:{marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,height:200,radius:{min:20,max:70}}},t=angular.merge(s,b.data),u=this,v=a.brand10(),w=u.nodes=null,x=null,y=null,z=null,A=1,B=100,C=null,D=!1;b.$watch("data",h,!0),b.$on("$destroy",p),c.on("$destroy",p),angular.element(e).on("resize",n),b.$watch(function(){return c[0].offsetWidth},o)}return{restrict:"A",scope:{data:"=?"},link:h}}angular.module("bento.d3").directive("bentoD3BubbleChart",a),a.$inject=["bentoD3Config","$parse","$log","$http","$window","$timeout","bentoChartService"]}();